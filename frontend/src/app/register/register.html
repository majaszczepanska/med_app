<div class="min-h-screen flex justify-center items-center bg-gradient-to-br from-[#74ebd5] to-[#9face6] p-4 font-sans">
  <div class="bg-white p-8 sm:p-10 rounded-2xl shadow-xl w-full max-w-[450px] text-center my-8">
    
    <h2 class="text-gray-800 text-2xl sm:text-3xl font-bold mb-8 tracking-wide">Create an account ğŸ¥</h2>
    
    <form #registerForm="ngForm" (ngSubmit)="register()" (input)="clearMessages()" (change)="clearMessages()">
      
      <div class="mb-5 text-left">
        <label class="block mb-2 font-semibold text-gray-700 text-sm">Email <span class="text-red-500 ml-1">*</span></label>
        <input [(ngModel)]="registerData.email" name="email" type="email" placeholder="email@example.com" 
              #email="ngModel"
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 transition text-sm bg-gray-50 focus:bg-white"
              required email>
        @if (email.invalid && (email.dirty || email.touched)) {
            <div class="text-red-600 text-sm mt-2 font-medium">
              <span>âŒ Required valid email.</span>
            </div>
        }
      </div>
      
      <div class="mb-5 text-left">
        <label class="block mb-2 font-semibold text-gray-700 text-sm">Password <span class="text-red-500 ml-1">*</span></label>
        <div class="relative w-full">
          <input [type]="showPass ? 'text' : 'password'" [(ngModel)]="registerData.password" name="password" #password="ngModel" required minlength="6" placeholder="******" 
                 class="w-full py-3 pl-3 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 transition text-sm bg-gray-50 focus:bg-white h-[48px]">
          <button type="button" (click)="showPass = !showPass" 
            class="absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700 focus:outline-none transition">
            <mat-icon>{{ showPass ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </div>
        @if (password.invalid && (password.dirty || password.touched)) {
          <div class="text-red-600 text-sm mt-2 font-medium">
            <span>âŒ Password must be at least 6 characters long!</span>
          </div>
        }
      </div>
      
      <div class="mb-5 text-left">
        <label class="block mb-2 font-semibold text-gray-700 text-sm">First name <span class="text-red-500 ml-1">*</span></label>
        <input [(ngModel)]="registerData.firstName" name="firstName" placeholder="First name" #fname="ngModel"
              minlength="3" 
              pattern="^[A-ZÄ„Ä†Ä˜ÅÅƒÃ“ÅšÅ¹Å»][a-zÄ…Ä‡Ä™Å‚Å„Ã³Å›ÅºÅ¼]+(-[A-ZÄ„Ä†Ä˜ÅÅƒÃ“ÅšÅ¹Å»][a-zÄ…Ä‡Ä™Å‚Å„Ã³Å›ÅºÅ¼]+)?$" 
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 transition text-sm bg-gray-50 focus:bg-white"
              required>
        @if (fname.invalid && (fname.dirty || fname.touched)) {
            <div class="text-red-600 text-sm mt-2 font-medium">
              @if (fname.errors?.['required']) { <span class="block">âŒ First name is required.</span> }
              @if (fname.errors?.['minlength']) { <span class="block">âŒ Min. 3 characters.</span> }
              @if (fname.errors?.['pattern']) { <span class="block">âŒ Must start with a capital letter.</span> }
            </div>
        }
      </div>

      <div class="mb-5 text-left">
        <label class="block mb-2 font-semibold text-gray-700 text-sm">Last name <span class="text-red-500 ml-1">*</span></label>
        <input [(ngModel)]="registerData.lastName" name="lastName" placeholder="Last name" #lname="ngModel"
              minlength="3" 
              pattern="^[A-ZÄ„Ä†Ä˜ÅÅƒÃ“ÅšÅ¹Å»][a-zÄ…Ä‡Ä™Å‚Å„Ã³Å›ÅºÅ¼]+(-[A-ZÄ„Ä†Ä˜ÅÅƒÃ“ÅšÅ¹Å»][a-zÄ…Ä‡Ä™Å‚Å„Ã³Å›ÅºÅ¼]+)?$" 
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 transition text-sm bg-gray-50 focus:bg-white"
              required>
        @if (lname.invalid && (lname.dirty || lname.touched)) {
            <div class="text-red-600 text-sm mt-2 font-medium">
              @if (lname.errors?.['required']) { <span class="block">âŒ Last name is required.</span> }
              @if (lname.errors?.['minlength']) { <span class="block">âŒ Min. 3 characters.</span> }
              @if (lname.errors?.['pattern']) { <span class="block">âŒ Must start with a capital letter.</span> }
            </div>
        }
      </div>

      <div class="mb-6 text-left">
        <label class="block mb-2 font-semibold text-gray-700 text-sm">Pesel <span class="text-red-500 ml-1">*</span></label>
        <input [(ngModel)]="registerData.pesel" name="pesel" type="text" placeholder="PESEL" #pesel="ngModel" 
              pattern="^\d{2}(?:0[1-9]|1[0-2]|2[1-9]|3[0-2]|4[1-9]|5[0-2]|6[1-9]|7[0-2]|8[1-9]|9[0-2])(?:0[1-9]|[12]\d|3[01])\d{5}$"
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 transition text-sm bg-gray-50 focus:bg-white"
              required>
        @if (pesel.invalid && (pesel.dirty || pesel.touched)) {
          <div class="text-red-600 text-sm mt-2 font-medium">
            @if (pesel.errors?.['required']) {
              <span class="block">âŒ PESEL is required.</span>
            }
            @if (pesel.errors?.['pattern']) {
              <span class="block">âŒ Invalid PESEL format.</span>
            }
          </div>
        }
      </div>

      @if (registerSuccess) {
          <div class="bg-green-100 text-green-800 p-3 rounded-lg mb-5 border border-green-200 font-medium text-sm text-left">
            {{ registerSuccess }}
          </div>
      }
      @if (registerError) {
        <div class="bg-red-100 text-red-800 p-3 rounded-lg mb-5 border border-red-200 font-medium text-sm text-left whitespace-pre-line">
          {{ registerError }}
        </div>
      }

      <button type="submit" 
              [disabled]="registerForm.invalid"
              class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3.5 rounded-lg mt-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-wide">
        Register
      </button>
    </form>

    <p class="mt-6 text-sm text-gray-600">
      You already have an account? <br class="sm:hidden">
      <a routerLink="/login" class="text-purple-600 font-bold hover:underline sm:ml-1">Sign in</a>
    </p>
  </div>
</div>