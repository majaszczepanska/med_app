<div class="min-h-screen flex justify-center items-center bg-gradient-to-br from-[#74ebd5] to-[#9face6] p-4 font-sans">
    <div class="bg-white p-10 rounded-2xl shadow-xl w-full max-w-[400px] text-center animate-fade-in-up">
      <h2 class="text-gray-800 text-3xl font-bold mb-2">New Password ✨</h2>
      <p class="text-gray-500 mb-8 text-sm">Please enter your new password below.</p>

      <form #resetForm="ngForm" (ngSubmit)="submit()">
        
        <div class="mb-5 text-left">
          <label class="block mb-2 font-semibold text-gray-700 text-sm">New Password <span class="text-red-500">*</span></label>
          <div class="relative w-full">
            <input [type]="showPass ? 'text' : 'password'" [(ngModel)]="newPassword" name="password" required minlength="6" #pass="ngModel" placeholder="******" 
                  class="w-full py-3 pl-3 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 transition text-sm h-[48px]">
            <button type="button" (click)="showPass = !showPass" class="absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700 focus:outline-none transition">
              <mat-icon>{{ showPass ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
          </div>
          @if (pass.invalid && (pass.dirty || pass.touched)) {
            <div class="text-red-600 text-sm mt-2 font-medium"><span>❌ Min. 6 characters required.</span></div>
          }
        </div>

        <div class="mb-6 text-left">
          <label class="block mb-2 font-semibold text-gray-700 text-sm">Confirm Password <span class="text-red-500">*</span></label>
          <div class="relative w-full">
            <input [type]="showPass ? 'text' : 'password'" [(ngModel)]="confirmPassword" name="confirmPassword" required minlength="6" #confirmPass="ngModel" placeholder="******" 
                  class="w-full py-3 pl-3 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 transition text-sm h-[48px]">
          </div>
          
          @if (confirmPass.dirty || confirmPass.touched) {
            @if (newPassword !== confirmPassword) {
              <div class="text-red-600 text-sm mt-2 font-medium"><span>❌ Passwords do not match.</span></div>
            }
          }
        </div>

        @if (successMessage) {
          <div class="bg-green-100 text-green-800 p-3 rounded-lg mb-5 border border-green-200 font-medium text-sm text-left whitespace-pre-line">{{ successMessage }}</div>
        }
        @if (errorMessage) {
          <div class="bg-red-100 text-red-800 p-3 rounded-lg mb-5 border border-red-200 font-medium text-sm text-left whitespace-pre-line">{{ errorMessage }}</div>
        }

        <button type="submit" [disabled]="resetForm.invalid || isLoading || !token || newPassword !== confirmPassword"
                class="w-full bg-purple-600 text-white font-bold py-3 rounded-lg mt-2 transition hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-wide">
          {{ isLoading ? 'SAVING...' : 'SAVE NEW PASSWORD' }}
        </button>
      </form>
    </div>
  </div>